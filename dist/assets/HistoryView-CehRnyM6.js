import{d as x,r as p,C as $,c as a,b as t,H as f,K as y,F as M,e as S,g as V,h as n,k as r,i as F,m,_ as H}from"./index-Vb9Qnebq.js";const O={class:"history"},B={class:"history-container"},E={class:"history-filters"},I={key:0,class:"history-list"},z={class:"item-info"},L={class:"item-main"},N={class:"item-url"},P={class:"item-meta"},R={class:"item-date"},U={class:"item-actions"},W=["onClick"],Y=["onClick"],K=["onClick"],j=["onClick"],q={key:1,class:"empty-state"},G=x({__name:"HistoryView",setup(J){const h=V(),l=p(""),i=p(""),u=p([{id:1,title:"Example.com SEO 分析",url:"https://example.com",status:"completed",createdAt:new Date("2024-01-15T10:30:00")},{id:2,title:"My-website.com 深度分析",url:"https://my-website.com",status:"completed",createdAt:new Date("2024-01-14T15:45:00")},{id:3,title:"Test-site.com 快速檢查",url:"https://test-site.com",status:"processing",createdAt:new Date("2024-01-14T09:20:00")},{id:4,title:"Demo-site.com 分析",url:"https://demo-site.com",status:"failed",createdAt:new Date("2024-01-13T14:10:00")},{id:5,title:"Portfolio.com 檢測",url:"https://portfolio.com",status:"completed",createdAt:new Date("2024-01-12T11:00:00")}]),v=$(()=>{let o=u.value;if(l.value&&(o=o.filter(e=>e.status===l.value)),i.value){const e=new Date,s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),c=new Date(s.getTime()-s.getDay()*24*60*60*1e3),T=new Date(e.getFullYear(),e.getMonth(),1);o=o.filter(d=>{switch(i.value){case"today":return d.createdAt>=s;case"week":return d.createdAt>=c;case"month":return d.createdAt>=T;default:return!0}})}return o.sort((e,s)=>s.createdAt.getTime()-e.createdAt.getTime())}),_=()=>{l.value="",i.value=""},g=o=>{alert(`查看分析結果: ${o.title}
功能開發中，稍後會顯示詳細結果`)},k=o=>{confirm(`確定要取消 "${o.title}" 的分析嗎？`)&&(o.status="failed",alert("分析已取消"))},w=o=>{confirm(`確定要重新分析 "${o.title}" 嗎？`)&&(o.status="processing",alert("重新分析已開始"))},b=o=>{if(confirm(`確定要刪除 "${o.title}" 的記錄嗎？`)){const e=u.value.findIndex(s=>s.id===o.id);e>-1&&u.value.splice(e,1)}},D=()=>{h.push("/analysis")},A=o=>({completed:"已完成",processing:"處理中",failed:"失敗"})[o]||o,C=o=>o.toLocaleString("zh-TW",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(o,e)=>(n(),a("div",O,[e[6]||(e[6]=t("div",{class:"history-header"},[t("h1",null,"分析歷史"),t("p",null,"查看您的所有分析記錄")],-1)),t("div",B,[t("div",E,[f(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value=s),class:"filter-select"},e[2]||(e[2]=[t("option",{value:""},"全部狀態",-1),t("option",{value:"completed"},"已完成",-1),t("option",{value:"processing"},"處理中",-1),t("option",{value:"failed"},"失敗",-1)]),512),[[y,l.value]]),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),class:"filter-select"},e[3]||(e[3]=[t("option",{value:""},"全部時間",-1),t("option",{value:"today"},"今天",-1),t("option",{value:"week"},"本週",-1),t("option",{value:"month"},"本月",-1)]),512),[[y,i.value]]),t("button",{class:"clear-filters-btn",onClick:_}," 清除篩選 ")]),v.value.length>0?(n(),a("div",I,[(n(!0),a(M,null,S(v.value,s=>(n(),a("div",{key:s.id,class:"history-item"},[t("div",z,[t("div",L,[t("h4",null,r(s.title),1),t("p",N,r(s.url),1)]),t("div",P,[t("span",R,r(C(s.createdAt)),1),t("span",{class:F(["item-status",s.status])},r(A(s.status)),3)])]),t("div",U,[s.status==="completed"?(n(),a("button",{key:0,class:"action-btn view-btn",onClick:c=>g(s)}," 查看結果 ",8,W)):m("",!0),s.status==="processing"?(n(),a("button",{key:1,class:"action-btn cancel-btn",onClick:c=>k(s)}," 取消 ",8,Y)):m("",!0),s.status==="failed"?(n(),a("button",{key:2,class:"action-btn retry-btn",onClick:c=>w(s)}," 重試 ",8,K)):m("",!0),t("button",{class:"action-btn delete-btn",onClick:c=>b(s)}," 刪除 ",8,j)])]))),128))])):(n(),a("div",q,[t("div",{class:"empty-content"},[e[4]||(e[4]=t("h3",null,"無歷史記錄",-1)),e[5]||(e[5]=t("p",null,"您還沒有任何分析歷史記錄",-1)),t("button",{class:"start-analysis-btn",onClick:D}," 開始第一次分析 ")])]))])]))}}),X=H(G,[["__scopeId","data-v-48aa07ef"]]);export{X as default};
